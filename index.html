<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>BasicSwap Orderbook - Live DEX Data</title>
  <meta name="description" content="Live orderbook data from the BasicSwap decentralized exchange. View offers, trading pairs, and market statistics.">

  <!-- Mixpanel Analytics -->
  <script type="text/javascript">
  (function(f,b){if(!b.__SV){var e,g,i,h;window.mixpanel=b;b._i=[];b.init=function(e,f,c){function g(a,d){var b=d.split(".");2==b.length&&(a=a[b[0]],d=b[1]);a[d]=function(){a.push([d].concat(Array.prototype.slice.call(arguments,0)))}}var a=b;"undefined"!==typeof c?a=b[c]=[]:c="mixpanel";a.people=a.people||[];a.toString=function(a){var d="mixpanel";"mixpanel"!==c&&(d+="."+c);a||(d+=" (stub)");return d};a.people.toString=function(){return a.toString(1)+".people (stub)"};i="disable time_event track track_pageview track_links track_forms track_with_groups add_group set_group remove_group register register_once alias unregister identify name_tag set_config reset opt_in_tracking opt_out_tracking has_opted_in_tracking has_opted_out_tracking clear_opt_in_out_tracking start_batch_senders people.set people.set_once people.unset people.increment people.append people.union people.track_charge people.clear_charges people.delete_user people.remove".split(" ");for(h=0;h<i.length;h++)g(a,i[h]);var j="set set_once union unset remove delete".split(" ");a.get_group=function(){function b(c){d[c]=function(){call2_args=arguments;call2=[c].concat(Array.prototype.slice.call(call2_args,0));a.push([e,call2])}}for(var d={},e=["get_group"].concat(Array.prototype.slice.call(arguments,0)),c=0;c<j.length;c++)b(j[c]);return d};b._i.push([e,f,c])};b.__SV=1.2;e=f.createElement("script");e.type="text/javascript";e.async=!0;e.src="https://cdn.mxpnl.com/libs/mixpanel-2-latest.min.js";g=f.getElementsByTagName("script")[0];g.parentNode.insertBefore(e,g)}})(document,window.mixpanel||[]);
  mixpanel.init('cc33009825ebf795b4bf010b235b29ee', {track_pageview: true});
  </script>

  <link rel="stylesheet" href="css/style.css">
</head>
<body>
  <header class="header">
    <div class="header-content">
      <a href="/" class="logo">
        <span class="logo-text">BasicSwap</span>
        <span class="logo-badge">Orderbook</span>
      </a>
      <nav class="nav">
        <a href="https://docs.basicswap.bid" class="nav-link">API Docs</a>
        <a href="https://account.basicswap.bid" class="nav-link btn-primary">Get API Access</a>
      </nav>
    </div>
  </header>

  <main class="container">
    <!-- Data Freshness Indicator -->
    <div class="freshness-bar">
      <div class="freshness-indicator" id="freshness-indicator">
        <span class="freshness-dot"></span>
        <span class="freshness-text" id="freshness-text">Connecting...</span>
      </div>
      <div class="freshness-stats">
        <span id="offer-count">0</span> offers
        <span class="separator">|</span>
        <span id="last-updated">--</span>
      </div>
      <button class="btn-refresh" onclick="manualRefresh()" title="Refresh">
        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <path d="M23 4v6h-6M1 20v-6h6M3.51 9a9 9 0 0 1 14.85-3.36L23 10M1 14l4.64 4.36A9 9 0 0 0 20.49 15"/>
        </svg>
      </button>
    </div>

    <!-- Filters -->
    <div class="filters-bar">
      <div class="filter-group">
        <label>From</label>
        <select id="filter-from" onchange="applyFilters()">
          <option value="">All Coins</option>
        </select>
      </div>
      <div class="filter-group">
        <label>To</label>
        <select id="filter-to" onchange="applyFilters()">
          <option value="">All Coins</option>
        </select>
      </div>
      <button class="btn-clear" onclick="clearFilters()">Clear Filters</button>
    </div>

    <!-- Offers Table -->
    <div class="table-container">
      <table class="offers-table">
        <thead>
          <tr>
            <th class="sortable" onclick="sortTable('pair')">
              Pair <span class="sort-icon">↕</span>
            </th>
            <th class="sortable" onclick="sortTable('amountFrom')">
              Amount <span class="sort-icon">↕</span>
            </th>
            <th class="sortable" onclick="sortTable('rate')">
              Rate <span class="sort-icon">↕</span>
            </th>
            <th class="sortable" onclick="sortTable('minSwap')">
              Min Swap <span class="sort-icon">↕</span>
            </th>
            <th class="sortable" onclick="sortTable('expiresAt')">
              Expires <span class="sort-icon">↕</span>
            </th>
          </tr>
        </thead>
        <tbody id="offers-body">
          <tr class="loading-row">
            <td colspan="5">
              <div class="loading-spinner"></div>
              <span>Loading orderbook...</span>
            </td>
          </tr>
        </tbody>
      </table>
    </div>

    <!-- Pagination -->
    <div class="pagination" id="pagination" style="display:none">
      <button class="btn-page" id="prev-btn" onclick="prevPage()" disabled>Previous</button>
      <span class="page-info" id="page-info">Page 1 of 1</span>
      <button class="btn-page" id="next-btn" onclick="nextPage()">Next</button>
    </div>

    <!-- Pair Stats -->
    <div class="stats-section">
      <h2>Trading Pairs</h2>
      <div class="pairs-grid" id="pairs-grid">
        <div class="loading-text">Loading pairs...</div>
      </div>
    </div>

    <!-- API CTA -->
    <div class="api-cta">
      <h2>Need Orderbook Data?</h2>
      <p>Access this data programmatically via our REST API. Free tier includes 5 requests/minute.</p>
      <div class="cta-buttons">
        <a href="https://docs.basicswap.bid" class="btn-secondary">View API Docs</a>
        <a href="https://account.basicswap.bid" class="btn-primary">Get API Key</a>
      </div>
    </div>
  </main>

  <footer class="footer">
    <div class="footer-content">
      <p>Data sourced from <a href="https://basicswapdex.com" target="_blank">BasicSwap DEX</a></p>
      <p class="footer-links">
        <a href="https://github.com/basicswap/basicswap">GitHub</a>
        <span class="separator">|</span>
        <a href="https://docs.basicswap.bid">API</a>
      </p>
    </div>
  </footer>

  <script src="js/app.js"></script>
</body>
</html>
